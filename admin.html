<!DOCTYPE html>
<html>
<head>
  <title>Admin | Simpatico HR ATS</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="font-family:system-ui;padding:30px">

<h2>Recruiter Admin Panel</h2>
<div id="list">Loading…</div>

<script>
const supabase = supabase.createClient(
  "https://cvkxtsvgnynxexmemfuy.supabase.co",
  "YOUR_ANON_KEY"
);

async function load() {
  const { data } = await supabase
    .from("candidates")
    .select("id, full_name, email, status, resume_url, jobs(title)");

  document.getElementById("list").innerHTML =
    data.map(c => `
      <div style="border:1px solid #ccc;padding:12px;margin-bottom:10px">
        <b>${c.full_name}</b> — ${c.jobs.title}<br>
        ${c.email}<br>
        Status: ${c.status}<br>
        <a href="${c.resume_url}" target="_blank">CV</a><br>
        <button onclick="update('${c.id}','shortlisted')">Shortlist</button>
        <button onclick="update('${c.id}','rejected')">Reject</button>
      </div>
    `).join("");
}

async function update(id, status) {
  await supabase
    .from("candidates")
    .update({ status })
    .eq("id", id);
  load();
}

load();
</script>
</body>
</html>
