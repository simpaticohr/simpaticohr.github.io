<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Evalis AI Interview</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #0f172a, #020617);
  font-family: system-ui;
  color: #e5e7eb;
  display: flex;
  justify-content: center;
  align-items: center;
}

.card {
  width: 92%;
  max-width: 420px;
  background: #020617;
  padding: 24px;
  border-radius: 16px;
  box-shadow: 0 0 40px rgba(0,0,0,.6);
  text-align: center;
}

#question {
  min-height: 70px;
  font-size: 18px;
  margin: 16px 0;
}

#status {
  font-size: 14px;
  color: #22c55e;
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: #2563eb;
  color: white;
  font-size: 16px;
  margin-top: 12px;
}
</style>
</head>

<body>
<div class="card">
  <h3>Evalis AI Interview</h3>
  <div id="question">Click start and answer verbally</div>
  <div id="status"></div>
  <button id="startBtn">Start Interview</button>
</div>

<script>
const questions = [
  "Tell me about yourself.",
  "Describe a key responsibility from your last role.",
  "Explain a challenge you handled.",
  "What skills make you suitable for this role?"
];

let step = 0;
let recognition;

/* ========== INIT SPEECH API ========== */
function initRecognition() {
  const SpeechRecognition =
    window.SpeechRecognition || window.webkitSpeechRecognition;

  recognition = new SpeechRecognition();
  recognition.lang = "en-US";
  recognition.interimResults = false;
  recognition.continuous = false;

  recognition.onresult = (e) => {
    const answer = e.results[0][0].transcript;
    document.getElementById("status").innerText =
      "You said: " + answer;

    step++;
    if (step >= questions.length) {
      document.getElementById("question").innerText =
        "Interview complete ✔ Score: " +
        (70 + Math.floor(Math.random() * 20)) + "%";
      return;
    }

    askQuestion();
  };

  recognition.onerror = (e) => {
    document.getElementById("status").innerText =
      "Mic error. Click Start again.";
  };
}

/* ========== ASK QUESTION ========== */
function askQuestion() {
  const q = questions[step];
  document.getElementById("question").innerText = q;

  const utter = new SpeechSynthesisUtterance(q);
  utter.onend = () => {
    document.getElementById("status").innerText = "Listening…";
    recognition.start(); // ✅ VALID
  };

  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

/* ========== START ========== */
document.getElementById("startBtn").onclick = () => {
  const btn = document.getElementById("startBtn");

  btn.disabled = true;           // prevent double click
  btn.style.display = "none";    // hide button ✅

  initRecognition();
  step = 0;
  askQuestion();
};
};
</script>
</body>
</html>
