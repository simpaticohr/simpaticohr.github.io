<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Evalis AI â€” ZARA Interview Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Poppins, Arial, sans-serif;
      background: #f4f8fb;
      margin: 0;
      padding: 20px;
    }
    .card {
      max-width: 650px;
      margin: auto;
      background: white;
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.1);
    }
    textarea {
      width: 100%;
      height: 110px;
      padding: 10px;
      font-size: 14px;
      margin-top: 10px;
    }
    button {
      margin-top: 10px;
      padding: 12px;
      width: 100%;
      font-weight: 700;
      border: none;
      border-radius: 10px;
      background: #00c2ff;
      color: white;
      cursor: pointer;
    }
    .secondary {
      background: #0f172a;
      margin-top: 8px;
    }
    .reply {
      margin-top: 15px;
      background: #f1f5f9;
      padding: 12px;
      border-radius: 10px;
      font-size: 14px;
    }
    .progress {
      font-size: 13px;
      color: #555;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>Evalis AI â€” ZARA Interview Lab</h2>
  <div class="progress" id="progress">Question 1 of 5</div>

  <p><strong>ZARA:</strong> <span id="question"></span></p>

  <textarea id="answer" placeholder="Type or use voice to answer..."></textarea>

  <button onclick="startVoice()">ðŸŽ¤ Speak Answer</button>
  <button class="secondary" onclick="submitAnswer()">Submit Answer</button>

  <div class="reply" id="reply"></div>
</div>

<script>
  const questions = [
    "Tell me about yourself.",
    "What are your key strengths?",
    "Describe a challenge you faced and how you handled it.",
    "Why should we hire you?",
    "Where do you see yourself in the next few years?"
  ];

  let current = 0;
  let totalScore = 0;

  const questionEl = document.getElementById("question");
  const progressEl = document.getElementById("progress");
  const answerEl = document.getElementById("answer");
  const replyEl = document.getElementById("reply");

  questionEl.innerText = questions[current];
  speak(questions[current]);

  function speak(text) {
    const msg = new SpeechSynthesisUtterance(text);
    msg.rate = 1;
    speechSynthesis.speak(msg);
  }

  function startVoice() {
    if (!('webkitSpeechRecognition' in window)) {
      alert("Voice not supported on this browser.");
      return;
    }
    const rec = new webkitSpeechRecognition();
    rec.lang = "en-US";
    rec.start();
    rec.onresult = e => {
      answerEl.value = e.results[0][0].transcript;
    };
  }

  function submitAnswer() {
    const answer = answerEl.value.trim();
    if (!answer) return;

    const wordCount = answer.split(" ").length;
    let score = 0;

    if (wordCount > 20) score += 4;
    if (wordCount > 40) score += 3;
    if (answer.includes("I")) score += 2;
    if (answer.includes("experience") || answer.includes("learn")) score += 1;

    totalScore += score;

    replyEl.innerHTML =
      `<strong>ZARA Feedback:</strong><br>
       Answer length: ${wordCount} words<br>
       Score for this answer: ${score}/10<br>
       Tip: Be structured, confident, and specific.`;

    answerEl.value = "";
    current++;

    if (current < questions.length) {
      setTimeout(() => {
        questionEl.innerText = questions[current];
        progressEl.innerText = `Question ${current + 1} of ${questions.length}`;
        replyEl.innerText = "";
        speak(questions[current]);
      }, 1200);
    } else {
      setTimeout(showResult, 1200);
    }
  }

  function showResult() {
    let verdict = "Needs Practice";
    if (totalScore >= 35) verdict = "Interview Ready";
    else if (totalScore >= 25) verdict = "Almost Ready";

    document.querySelector(".card").innerHTML = `
      <h2>Interview Completed</h2>
      <p><strong>Total Score:</strong> ${totalScore}/50</p>
      <p><strong>Result:</strong> ${verdict}</p>
      <p>This is a simulated AI interview. Advanced AI feedback coming soon.</p>
    `;
  }
</script>

</body>
</html>
