<!-- dashboard/hr.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HR Dashboard - SimpaticoHR</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="../css/app.css" rel="stylesheet">
</head>
<body>
  <div class="loading-screen" id="loadingScreen">
    <div class="spinner"></div>
    <span style="color: var(--gray-500); font-size: 0.9rem;">Loading SimpaticoHR...</span>
  </div>

  <div class="app-layout" id="appLayout" style="display:none;">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo"><i class="fas fa-infinity"></i></div>
        <div class="sidebar-brand">Simpatico<span style="color: var(--primary-light)">HR</span></div>
      </div>
      
      <nav class="sidebar-menu">
        <div class="menu-section">
          <div class="menu-section-title">Main</div>
          <div class="menu-item active" data-page="dashboard" onclick="showPage('dashboard')">
            <span class="icon"><i class="fas fa-chart-pie"></i></span>
            <span class="label">Dashboard</span>
          </div>
          <div class="menu-item" data-page="jobs" onclick="showPage('jobs')">
            <span class="icon"><i class="fas fa-briefcase"></i></span>
            <span class="label">Jobs</span>
            <span class="badge">12</span>
          </div>
          <div class="menu-item" data-page="applications" onclick="showPage('applications')">
            <span class="icon"><i class="fas fa-file-alt"></i></span>
            <span class="label">Applications</span>
            <span class="badge">48</span>
          </div>
          <div class="menu-item" data-page="pipeline" onclick="showPage('pipeline')">
            <span class="icon"><i class="fas fa-columns"></i></span>
            <span class="label">Pipeline</span>
          </div>
        </div>

        <div class="menu-section">
          <div class="menu-section-title">Recruitment</div>
          <div class="menu-item" data-page="sourcing" onclick="showPage('sourcing')">
            <span class="icon"><i class="fas fa-search"></i></span>
            <span class="label">Sourcing</span>
          </div>
          <div class="menu-item" data-page="interviews" onclick="showPage('interviews')">
            <span class="icon"><i class="fas fa-video"></i></span>
            <span class="label">Interviews</span>
            <span class="badge" style="background:var(--warning)">3</span>
          </div>
          <div class="menu-item" data-page="proctoring" onclick="showPage('proctoring')">
            <span class="icon"><i class="fas fa-eye"></i></span>
            <span class="label">Proctoring Reports</span>
          </div>
          <div class="menu-item" data-page="onboarding" onclick="showPage('onboarding')">
            <span class="icon"><i class="fas fa-clipboard-check"></i></span>
            <span class="label">Onboarding</span>
          </div>
        </div>

        <div class="menu-section">
          <div class="menu-section-title">Tools</div>
          <div class="menu-item" data-page="jd-generator" onclick="showPage('jd-generator')">
            <span class="icon"><i class="fas fa-wand-magic-sparkles"></i></span>
            <span class="label">JD Generator</span>
          </div>
          <div class="menu-item" data-page="automation" onclick="showPage('automation')">
            <span class="icon"><i class="fas fa-robot"></i></span>
            <span class="label">Automation</span>
          </div>
          <div class="menu-item" data-page="whatsapp" onclick="showPage('whatsapp')">
            <span class="icon"><i class="fab fa-whatsapp"></i></span>
            <span class="label">WhatsApp</span>
          </div>
          <div class="menu-item" data-page="talent-pool" onclick="showPage('talent-pool')">
            <span class="icon"><i class="fas fa-users"></i></span>
            <span class="label">Talent Pool</span>
          </div>
        </div>

        <div class="menu-section">
          <div class="menu-section-title">Settings</div>
          <div class="menu-item" data-page="analytics" onclick="showPage('analytics')">
            <span class="icon"><i class="fas fa-chart-bar"></i></span>
            <span class="label">Analytics</span>
          </div>
          <div class="menu-item" data-page="settings" onclick="showPage('settings')">
            <span class="icon"><i class="fas fa-cog"></i></span>
            <span class="label">Settings</span>
          </div>
        </div>
      </nav>

      <div class="sidebar-footer">
        <div class="sidebar-user" onclick="authManager.logout()">
          <div class="avatar" id="userAvatar">HR</div>
          <div class="info">
            <div class="name" id="userName">HR Manager</div>
            <div class="email" id="userEmail">hr@company.com</div>
          </div>
          <i class="fas fa-sign-out-alt" style="color: var(--gray-500); margin-left: auto;"></i>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Top Header -->
      <header class="top-header">
        <div class="header-left">
          <button class="toggle-sidebar" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
          </button>
          <div class="breadcrumb">
            <span>SimpaticoHR</span>
            <i class="fas fa-chevron-right" style="font-size: 0.7rem;"></i>
            <span class="current" id="breadcrumbCurrent">Dashboard</span>
          </div>
        </div>
        <div class="header-right">
          <div class="search-bar">
            <i class="fas fa-search search-icon"></i>
            <input type="text" placeholder="Search jobs, candidates, applications..." id="globalSearch" onkeyup="handleGlobalSearch(this.value)">
          </div>
          <div class="header-actions">
            <button class="notification-btn" onclick="toggleNotifications()">
              <i class="fas fa-bell"></i>
              <div class="dot" id="notifDot"></div>
            </button>
            <button class="btn btn-primary btn-sm" onclick="openCreateJobModal()">
              <i class="fas fa-plus"></i> New Job
            </button>
          </div>
        </div>
      </header>

      <!-- Dashboard Page -->
      <div class="page-content" id="page-dashboard">
        <div class="page-header">
          <div>
            <h1 id="dashGreeting">Good Morning, HR Manager ðŸ‘‹</h1>
            <p class="subtitle">Here's what's happening with your recruitment today.</p>
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <button class="btn btn-secondary btn-sm"><i class="fas fa-download"></i> Export</button>
            <button class="btn btn-primary btn-sm" onclick="openCreateJobModal()"><i class="fas fa-plus"></i> Create Job</button>
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-info">
              <h4>Active Jobs</h4>
              <div class="value" id="statActiveJobs">0</div>
              <div class="change positive"><i class="fas fa-arrow-up"></i> 12% from last month</div>
            </div>
            <div class="stat-icon" style="background: var(--primary-50); color: var(--primary);"><i class="fas fa-briefcase"></i></div>
          </div>
          <div class="stat-card">
            <div class="stat-info">
              <h4>Total Applications</h4>
              <div class="value" id="statApplications">0</div>
              <div class="change positive"><i class="fas fa-arrow-up"></i> 23% from last month</div>
            </div>
            <div class="stat-icon" style="background: var(--info-light); color: var(--info);"><i class="fas fa-file-alt"></i></div>
          </div>
          <div class="stat-card">
            <div class="stat-info">
              <h4>Interviews Today</h4>
              <div class="value" id="statInterviews">0</div>
              <div class="change"><i class="fas fa-clock"></i> 3 upcoming</div>
            </div>
            <div class="stat-icon" style="background: var(--warning-light); color: var(--warning);"><i class="fas fa-video"></i></div>
          </div>
          <div class="stat-card">
            <div class="stat-info">
              <h4>Hired This Month</h4>
              <div class="value" id="statHired">0</div>
              <div class="change positive"><i class="fas fa-arrow-up"></i> 8% from last month</div>
            </div>
            <div class="stat-icon" style="background: var(--success-light); color: var(--success);"><i class="fas fa-user-check"></i></div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;">
          <!-- Recent Applications -->
          <div class="card">
            <div class="card-header">
              <h3><i class="fas fa-file-alt" style="color: var(--primary); margin-right: 8px;"></i> Recent Applications</h3>
              <button class="btn btn-ghost btn-sm" onclick="showPage('applications')">View All</button>
            </div>
            <div class="card-body" style="padding: 0;">
              <div class="table-container">
                <table>
                  <thead>
                    <tr>
                      <th>Candidate</th>
                      <th>Job</th>
                      <th>AI Score</th>
                      <th>Status</th>
                      <th>Applied</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="recentApplicationsTable">
                    <tr><td colspan="6" class="text-center text-gray" style="padding: 2rem;">Loading applications...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Upcoming Interviews -->
          <div class="card">
            <div class="card-header">
              <h3><i class="fas fa-video" style="color: var(--warning); margin-right: 8px;"></i> Today's Interviews</h3>
            </div>
            <div class="card-body" id="upcomingInterviews">
              <p class="text-gray text-center" style="padding: 1rem;">Loading...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Jobs Page -->
      <div class="page-content hidden" id="page-jobs">
        <div class="page-header">
          <div>
            <h1>Jobs Management</h1>
            <p class="subtitle">Create, manage, and track all your job postings</p>
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <button class="btn btn-secondary btn-sm" onclick="showPage('jd-generator')"><i class="fas fa-wand-magic-sparkles"></i> AI Generate JD</button>
            <button class="btn btn-primary btn-sm" onclick="openCreateJobModal()"><i class="fas fa-plus"></i> Create Job</button>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div style="display: flex; gap: 0.75rem;">
              <select class="form-control" style="width: 150px; padding: 6px 10px; font-size: 0.85rem;">
                <option>All Status</option>
                <option>Active</option>
                <option>Draft</option>
                <option>Paused</option>
                <option>Closed</option>
              </select>
              <select class="form-control" style="width: 150px; padding: 6px 10px; font-size: 0.85rem;">
                <option>All Departments</option>
                <option>Engineering</option>
                <option>Design</option>
                <option>Marketing</option>
                <option>Sales</option>
              </select>
            </div>
          </div>
          <div class="card-body" style="padding: 0;">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Job Title</th>
                    <th>Department</th>
                    <th>Applications</th>
                    <th>Status</th>
                    <th>Posted</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="jobsTable">
                  <tr><td colspan="6" class="text-center text-gray" style="padding: 2rem;">Loading jobs...</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Pipeline Page (Kanban) -->
      <div class="page-content hidden" id="page-pipeline">
        <div class="page-header">
          <div>
            <h1>Hiring Pipeline</h1>
            <p class="subtitle">Drag and drop candidates through your hiring stages</p>
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <select class="form-control" style="width: 200px; padding: 6px 10px; font-size: 0.85rem;" id="pipelineJobFilter" onchange="loadPipeline(this.value)">
              <option value="">Select Job</option>
            </select>
          </div>
        </div>
        <div class="pipeline" id="pipelineBoard">
          <!-- Pipeline stages will be rendered here -->
        </div>
      </div>

      <!-- JD Generator Page -->
      <div class="page-content hidden" id="page-jd-generator">
        <div class="page-header">
          <div>
            <h1><i class="fas fa-wand-magic-sparkles" style="color: var(--primary);"></i> AI Job Description Generator</h1>
            <p class="subtitle">Generate professional job descriptions in seconds using AI</p>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
          <div class="card">
            <div class="card-header"><h3>Input Details</h3></div>
            <div class="card-body">
              <div class="form-group">
                <label class="form-label">Job Title *</label>
                <input type="text" class="form-control" id="jdTitle" placeholder="e.g., Senior React Developer">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">Department</label>
                  <input type="text" class="form-control" id="jdDepartment" placeholder="Engineering">
                </div>
                <div class="form-group">
                  <label class="form-label">Experience</label>
                  <input type="text" class="form-control" id="jdExperience" placeholder="3-5 years">
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Key Skills</label>
                <input type="text" class="form-control" id="jdSkills" placeholder="React, TypeScript, Node.js">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">Location</label>
                  <input type="text" class="form-control" id="jdLocation" placeholder="Bangalore, India">
                </div>
                <div class="form-group">
                  <label class="form-label">Work Type</label>
                  <select class="form-control" id="jdWorkType">
                    <option>Remote</option>
                    <option>Onsite</option>
                    <option>Hybrid</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Additional Notes</label>
                <textarea class="form-control" id="jdNotes" placeholder="Any specific requirements or company culture details..."></textarea>
              </div>
              <button class="btn btn-primary w-full" onclick="generateJD()" id="generateJDBtn">
                <i class="fas fa-wand-magic-sparkles"></i> Generate Job Description
              </button>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3>Generated JD</h3>
              <div style="display: flex; gap: 0.5rem;">
                <button class="btn btn-ghost btn-sm" onclick="copyJD()"><i class="fas fa-copy"></i> Copy</button>
                <button class="btn btn-primary btn-sm" onclick="createJobFromJD()"><i class="fas fa-plus"></i> Create Job</button>
              </div>
            </div>
            <div class="card-body">
              <div id="jdOutput" style="white-space: pre-wrap; font-size: 0.9rem; color: var(--gray-600); min-height: 400px; line-height: 1.8;">
                <div class="text-center text-gray" style="padding: 4rem 2rem;">
                  <i class="fas fa-wand-magic-sparkles" style="font-size: 3rem; color: var(--gray-300); margin-bottom: 1rem; display: block;"></i>
                  Enter job details and click Generate to create a professional JD using AI
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Interviews Page -->
      <div class="page-content hidden" id="page-interviews">
        <div class="page-header">
          <div>
            <h1>Interview Management</h1>
            <p class="subtitle">Schedule, manage, and review all interviews</p>
          </div>
          <button class="btn btn-primary btn-sm" onclick="openScheduleInterviewModal()">
            <i class="fas fa-calendar-plus"></i> Schedule Interview
          </button>
        </div>
        <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr);">
          <div class="stat-card">
            <div class="stat-info">
              <h4>Scheduled</h4>
              <div class="value" id="intScheduled">0</div>
            </div>
            <div class="stat-icon" style="background: var(--info-light); color: var(--info);"><i class="fas fa-calendar"></i></div>
          </div>
          <div class="stat-card">
            <div class="stat-info">
              <h4>Completed</h4>
              <div class="value" id="intCompleted">0</div>
            </div>
            <div class="stat-icon" style="background: var(--success-light); color: var(--success);"><i class="fas fa-check-circle"></i></div>
          </div>
          <div class="stat-card">
            <div class="stat-info">
              <h4>Flagged (Cheating)</h4>
              <div class="value" id="intFlagged">0</div>
            </div>
            <div class="stat-icon" style="background: var(--danger-light); color: var(--danger);"><i class="fas fa-flag"></i></div>
          </div>
          <div class="stat-card">
            <div class="stat-info">
              <h4>Avg Trust Score</h4>
              <div class="value" id="intAvgTrust">--</div>
            </div>
            <div class="stat-icon" style="background: var(--warning-light); color: var(--warning);"><i class="fas fa-shield-halved"></i></div>
          </div>
        </div>
        <div class="card">
          <div class="card-body" style="padding: 0;">
            <table>
              <thead>
                <tr>
                  <th>Candidate</th>
                  <th>Job</th>
                  <th>Type</th>
                  <th>Scheduled</th>
                  <th>Trust Score</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="interviewsTable">
                <tr><td colspan="7" class="text-center text-gray" style="padding: 2rem;">Loading interviews...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Proctoring Reports Page -->
      <div class="page-content hidden" id="page-proctoring">
        <div class="page-header">
          <div>
            <h1><i class="fas fa-eye" style="color: var(--danger);"></i> Proctoring Reports</h1>
            <p class="subtitle">Review AI proctoring results, eye tracking data, and cheating flags</p>
          </div>
        </div>
        <div id="proctoringReports">
          <p class="text-gray text-center" style="padding: 2rem;">Select an interview to view proctoring report</p>
        </div>
      </div>

      <!-- Automation Page -->
      <div class="page-content hidden" id="page-automation">
        <div class="page-header">
          <div>
            <h1><i class="fas fa-robot" style="color: var(--primary);"></i> HR Automation Rules</h1>
            <p class="subtitle">Set up triggers and automatic actions to streamline your workflow</p>
          </div>
          <button class="btn btn-primary btn-sm" onclick="openCreateAutomationModal()">
            <i class="fas fa-plus"></i> Create Rule
          </button>
        </div>
        <div id="automationRules">
          <p class="text-gray text-center" style="padding: 2rem;">Loading automation rules...</p>
        </div>
      </div>

      <!-- WhatsApp Page -->
      <div class="page-content hidden" id="page-whatsapp">
        <div class="page-header">
          <div>
            <h1><i class="fab fa-whatsapp" style="color: #25D366;"></i> WhatsApp Communication</h1>
            <p class="subtitle">Send messages, templates, and manage WhatsApp notifications</p>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
          <div class="card">
            <div class="card-header"><h3>Send Message</h3></div>
            <div class="card-body">
              <div class="form-group">
                <label class="form-label">Recipient Phone</label>
                <input type="tel" class="form-control" id="waPhone" placeholder="+91 98765 43210">
              </div>
              <div class="form-group">
                <label class="form-label">Template</label>
                <select class="form-control" id="waTemplate">
                  <option value="">Custom Message</option>
                  <option>Interview Scheduled</option>
                  <option>Interview Reminder</option>
                  <option>Application Status Update</option>
                  <option>Offer Notification</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Message</label>
                <textarea class="form-control" id="waMessage" placeholder="Type your message..."></textarea>
              </div>
              <button class="btn btn-success w-full" onclick="sendWhatsApp()">
                <i class="fab fa-whatsapp"></i> Send WhatsApp
              </button>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Recent Messages</h3></div>
            <div class="card-body" id="waMessagesList">
              <p class="text-gray text-center">No messages yet</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Onboarding Page -->
      <div class="page-content hidden" id="page-onboarding">
        <div class="page-header">
          <div>
            <h1><i class="fas fa-clipboard-check" style="color: var(--success);"></i> Onboarding</h1>
            <p class="subtitle">Manage new hire onboarding process</p>
          </div>
        </div>
        <div class="card">
          <div class="card-body" style="padding: 0;">
            <table>
              <thead>
                <tr>
                  <th>Candidate</th>
                  <th>Job</th>
                  <th>Joining Date</th>
                  <th>Documents</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="onboardingTable">
                <tr><td colspan="6" class="text-center text-gray" style="padding: 2rem;">No onboarding in progress</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Placeholder pages -->
      <div class="page-content hidden" id="page-applications">
        <div class="page-header"><div><h1>Applications</h1><p class="subtitle">Review and manage all applications</p></div></div>
        <div class="card"><div class="card-body" style="padding:0;"><table><thead><tr><th>Candidate</th><th>Job</th><th>AI Score</th><th>Status</th><th>Applied</th><th>Actions</th></tr></thead><tbody id="allApplicationsTable"><tr><td colspan="6" class="text-center text-gray" style="padding:2rem;">Loading...</td></tr></tbody></table></div></div>
      </div>

      <div class="page-content hidden" id="page-sourcing"><div class="page-header"><div><h1>Candidate Sourcing</h1><p class="subtitle">Search and source candidates from your talent pool</p></div></div><div class="card"><div class="card-body"><div class="form-row"><div class="form-group"><label class="form-label">Skills</label><input class="form-control" id="sourceSkills" placeholder="React, Python, AWS..."></div><div class="form-group"><label class="form-label">Experience</label><input class="form-control" id="sourceExp" placeholder="3-5 years"></div></div><button class="btn btn-primary" onclick="searchCandidates()"><i class="fas fa-search"></i> Search Candidates</button><div id="sourceResults" style="margin-top:1.5rem;"></div></div></div></div>

      <div class="page-content hidden" id="page-talent-pool"><div class="page-header"><div><h1>Talent Pool</h1></div></div><div class="card"><div class="card-body"><p class="text-gray">Talent pool management coming soon.</p></div></div></div>

      <div class="page-content hidden" id="page-analytics"><div class="page-header"><div><h1>Analytics & Reports</h1></div></div>
        <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
          <div class="card"><div class="card-body"><h4 style="margin-bottom:1rem;">Time to Hire</h4><div style="font-size:2.5rem;font-weight:800;color:var(--primary);">18 <span style="font-size:1rem;color:var(--gray-500);">days avg</span></div></div></div>
          <div class="card"><div class="card-body"><h4 style="margin-bottom:1rem;">Source Effectiveness</h4><div style="font-size:2.5rem;font-weight:800;color:var(--success);">72% <span style="font-size:1rem;color:var(--gray-500);">conversion</span></div></div></div>
          <div class="card"><div class="card-body"><h4 style="margin-bottom:1rem;">Interview Pass Rate</h4><div style="font-size:2.5rem;font-weight:800;color:var(--warning);">45% <span style="font-size:1rem;color:var(--gray-500);">of interviewed</span></div></div></div>
        </div>
      </div>

      <div class="page-content hidden" id="page-settings"><div class="page-header"><div><h1>Settings</h1></div></div><div class="card"><div class="card-body"><p>Company settings, team management, integrations configuration.</p></div></div></div>
    </div>
  </div>

  <!-- Create Job Modal -->
  <div class="modal-overlay" id="createJobModal">
    <div class="modal" style="max-width: 700px;">
      <div class="modal-header">
        <h3><i class="fas fa-briefcase" style="color: var(--primary);"></i> Create New Job</h3>
        <button class="btn btn-ghost btn-icon" onclick="closeModal('createJobModal')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Job Title *</label>
          <input type="text" class="form-control" id="newJobTitle" placeholder="e.g., Senior Frontend Developer">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Department</label>
            <input type="text" class="form-control" id="newJobDept" placeholder="Engineering">
          </div>
          <div class="form-group">
            <label class="form-label">Location</label>
            <input type="text" class="form-control" id="newJobLocation" placeholder="Bangalore / Remote">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Experience (Min)</label>
            <input type="number" class="form-control" id="newJobExpMin" placeholder="2" step="0.5">
          </div>
          <div class="form-group">
            <label class="form-label">Experience (Max)</label>
            <input type="number" class="form-control" id="newJobExpMax" placeholder="5" step="0.5">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Salary Min (â‚¹)</label>
            <input type="number" class="form-control" id="newJobSalaryMin" placeholder="800000">
          </div>
          <div class="form-group">
            <label class="form-label">Salary Max (â‚¹)</label>
            <input type="number" class="form-control" id="newJobSalaryMax" placeholder="1500000">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Required Skills</label>
          <input type="text" class="form-control" id="newJobSkills" placeholder="React, TypeScript, Node.js (comma-separated)">
        </div>
        <div class="form-group">
          <label class="form-label">Job Description</label>
          <textarea class="form-control" id="newJobDesc" style="min-height: 150px;" placeholder="Describe the role, responsibilities, and requirements..."></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Employment Type</label>
            <select class="form-control" id="newJobType">
              <option value="full_time">Full Time</option>
              <option value="part_time">Part Time</option>
              <option value="contract">Contract</option>
              <option value="internship">Internship</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Positions</label>
            <input type="number" class="form-control" id="newJobPositions" placeholder="1" value="1">
          </div>
        </div>
        <div class="form-group">
          <label style="display:flex;align-items:center;gap:8px;">
            <input type="checkbox" id="newJobAutoScreen" checked>
            <span style="font-size:0.9rem;">Enable AI Auto-Screening</span>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('createJobModal')">Cancel</button>
        <button class="btn btn-secondary" onclick="saveJobDraft()"><i class="fas fa-save"></i> Save Draft</button>
        <button class="btn btn-primary" onclick="publishJob()"><i class="fas fa-rocket"></i> Publish Job</button>
      </div>
    </div>
  </div>

  <!-- Notification Panel -->
  <div class="modal-overlay" id="notificationPanel" style="justify-content: flex-end; align-items: flex-start; padding: 0;">
    <div style="background: white; width: 400px; height: 100vh; overflow-y: auto; box-shadow: var(--shadow-xl); animation: slideFromRight 0.3s ease;">
      <div style="padding: 1.5rem; border-bottom: 1px solid var(--gray-200); display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; background: white; z-index: 1;">
        <h3>Notifications</h3>
        <button class="btn btn-ghost btn-sm" onclick="closeModal('notificationPanel')"><i class="fas fa-times"></i></button>
      </div>
      <div id="notificationsList" style="padding: 1rem;">
        <p class="text-gray text-center" style="padding: 2rem;">No new notifications</p>
      </div>
    </div>
  </div>

  <div class="toast-container" id="toastContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../js/supabase-client.js"></script>
  <script src="../js/auth.js"></script>
  <script src="../js/app.js"></script>
  <script>
    // Initialize Dashboard
    document.addEventListener('DOMContentLoaded', async () => {
      const session = await authManager.guardRoute(['company_admin', 'hr_manager']);
      if (!session) return;

      document.getElementById('userName').textContent = session.profile.full_name;
      document.getElementById('userEmail').textContent = session.profile.email;
      document.getElementById('userAvatar').textContent = session.profile.full_name.split(' ').map(n => n[0]).join('').toUpperCase();

      const hour = new Date().getHours();
      const greeting = hour < 12 ? 'Good Morning' : hour < 17 ? 'Good Afternoon' : 'Good Evening';
      document.getElementById('dashGreeting').textContent = `${greeting}, ${session.profile.full_name.split(' ')[0]} ðŸ‘‹`;

      await loadDashboardData(session.profile.company_id);

      document.getElementById('loadingScreen').style.display = 'none';
      document.getElementById('appLayout').style.display = 'flex';
    });
  </script>
</body>
</html>
