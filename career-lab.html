<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AI Career Lab | Simpatico HR</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

    <style>
        :root { --primary: #002d5a; --tech: #00c2ff; --danger: #e74c3c; --success: #25D366; }
        body { font-family: 'Poppins', sans-serif; background: #f4f8fb; margin: 0; color: #333; }
        .nav { background: var(--primary); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; }
        .nav a { color: white; text-decoration: none; font-weight: 600; font-size: 14px; }
        .container { max-width: 800px; margin: 40px auto; padding: 20px; }
        .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; }
        .btn { display: block; width: 100%; padding: 15px; border-radius: 10px; text-decoration: none; font-weight: 700; margin-top: 20px; border: none; cursor: pointer; font-size: 16px; }
        .btn-upload { background: var(--primary); color: white; }
        .btn-zara { background: var(--tech); color: white; margin-top: 10px; }
        .btn-pay { background: var(--success); color: white; display: none; }
        #loading { display: none; margin: 20px 0; }
        #result { display: none; margin-top: 20px; }
        .score { font-size: 3rem; font-weight: 800; color: var(--danger); }
    </style>
</head>
<body>

<div class="nav">
    <a href="index.html">SIMPATICO HR</a>
    <a href="index.html">Back to Home</a>
</div>

<div class="container">
    <div class="card">
        <h2>AI CV Audit</h2>
        <p>Upload your PDF CV to see your real ATS score.</p>
        
        <input type="file" id="cvInput" accept=".pdf" style="display:none" onchange="processPDF(this)">
        <button class="btn btn-upload" onclick="document.getElementById('cvInput').click()">Select PDF CV</button>

        <div id="loading">
            <i class="fa-solid fa-spinner fa-spin fa-2x"></i>
            <p>AI is reading your data...</p>
        </div>

        <div id="result">
            <div class="score" id="scoreValue">0%</div>
            <p style="color:var(--danger); font-weight:700;">ATS COMPLIANCE: CRITICAL ERROR</p>
            <p style="font-size:14px; color:#666;">Our AI detected missing industry keywords and formatting issues.</p>
            
            <a href="https://wa.me/919544842260?text=I want to pay for the Premium CV Fix and Interview Guide" class="btn btn-pay" id="payBtn">Fix My CV Now (â‚¹999)</a>
        </div>

        <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">

        <h2>Zara AI Interview</h2>
        <p>Practice speaking with our AI voice coach.</p>
        <a href="https://grow.google/certificates/interview-warmup/" target="_blank" class="btn btn-zara">Launch Zara Practice</a>
    </div>
</div>

<script>
    const pdfjsLib = window['pdfjs-dist/legacy/build/pdf'];
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

    async function processPDF(input) {
        if (!input.files[0]) return;
        
        document.getElementById('loading').style.display = 'block';
        document.getElementById('result').style.display = 'none';

        try {
            const file = input.files[0];
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
            let text = "";

            for (let i = 1; i <= Math.min(pdf.numPages, 2); i++) {
                const page = await pdf.getPage(i);
                const content = await page.getTextContent();
                text += content.items.map(s => s.str).join(" ");
            }

            // Real Keyword Check
            const keywords = ["experience", "management", "skills", "education", "project", "professional"];
            let found = 0;
            keywords.forEach(w => { if(text.toLowerCase().includes(w)) found++; });

            // Calculate Score
            let finalScore = 20 + (found * 10);
            if (finalScore > 80) finalScore = 78; // Cap to encourage sales

            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('result').style.display = 'block';
                document.getElementById('scoreValue').innerText = finalScore + "%";
                document.getElementById('payBtn').style.display = 'block';
            }, 2000);

        } catch (e) {
            alert("Please upload a valid PDF file.");
            document.getElementById('loading').style.display = 'none';
        }
    }
</script>

</body>
</html>

