<!-- auth/register-company.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register Company - SimpaticoHR</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="../css/app.css" rel="stylesheet">
  <style>
    .auth-page { min-height: 100vh; display: flex; }
    .auth-left {
      flex: 1; background: linear-gradient(135deg, #059669 0%, #0ea5e9 100%);
      display: flex; align-items: center; justify-content: center; padding: 3rem;
      position: relative; overflow: hidden;
    }
    .auth-left-content { position: relative; z-index: 1; color: white; max-width: 500px; }
    .auth-left-content h2 { font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem; }
    .auth-right { flex: 1; display: flex; align-items: center; justify-content: center; padding: 2rem; background: white; overflow-y: auto; }
    .auth-form { width: 100%; max-width: 520px; }
    .auth-form .logo { display: flex; align-items: center; gap: 10px; margin-bottom: 2rem; }
    .auth-form .logo .logo-icon {
      width: 44px; height: 44px; background: linear-gradient(135deg, var(--primary), #7c3aed);
      border-radius: 12px; display: flex; align-items: center; justify-content: center;
      color: white; font-size: 1.2rem;
    }
    .auth-form h2 { font-size: 1.5rem; font-weight: 800; margin-bottom: 0.5rem; }
    .auth-form .subtitle { color: var(--gray-500); margin-bottom: 1.5rem; font-size: 0.95rem; }
    .auth-links { text-align: center; margin-top: 1.5rem; font-size: 0.9rem; color: var(--gray-500); }
    .auth-links a { color: var(--primary); font-weight: 600; }
    .step-indicator { display: flex; align-items: center; gap: 8px; margin-bottom: 2rem; }
    .step-dot { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; background: var(--gray-200); color: var(--gray-500); }
    .step-dot.active { background: var(--primary); color: white; }
    .step-dot.done { background: var(--success); color: white; }
    .step-line { flex: 1; height: 2px; background: var(--gray-200); }
    .step-line.done { background: var(--success); }
    @media (max-width: 768px) { .auth-left { display: none; } }
  </style>
</head>
<body>
  <div class="auth-page">
    <div class="auth-left">
      <div class="auth-left-content">
        <h2>Register Your Company</h2>
        <p style="font-size: 1.1rem; opacity: 0.9;">Start your 14-day free trial. No credit card required. Get instant access to AI-powered recruitment tools.</p>
        <div style="margin-top: 2rem; display: flex; flex-direction: column; gap: 12px;">
          <div style="display:flex;align-items:center;gap:12px;background:rgba(255,255,255,0.15);padding:12px 16px;border-radius:10px;">
            <i class="fas fa-check-circle" style="font-size:1.2rem;"></i>
            <span>5 Free Jobs + AI Proctored Interviews</span>
          </div>
          <div style="display:flex;align-items:center;gap:12px;background:rgba(255,255,255,0.15);padding:12px 16px;border-radius:10px;">
            <i class="fas fa-check-circle" style="font-size:1.2rem;"></i>
            <span>Complete ATS Pipeline</span>
          </div>
          <div style="display:flex;align-items:center;gap:12px;background:rgba(255,255,255,0.15);padding:12px 16px;border-radius:10px;">
            <i class="fas fa-check-circle" style="font-size:1.2rem;"></i>
            <span>WhatsApp + Email Automation</span>
          </div>
          <div style="display:flex;align-items:center;gap:12px;background:rgba(255,255,255,0.15);padding:12px 16px;border-radius:10px;">
            <i class="fas fa-check-circle" style="font-size:1.2rem;"></i>
            <span>Multi-Client Data Isolation</span>
          </div>
        </div>
      </div>
    </div>
    <div class="auth-right">
      <div class="auth-form">
        <div class="logo">
          <div class="logo-icon"><i class="fas fa-infinity"></i></div>
          <span style="font-size:1.5rem;font-weight:800;">Simpatico<span style="color: var(--primary)">HR</span></span>
        </div>

        <h2>Create Company Account</h2>
        <p class="subtitle">Start your 14-day free trial</p>

        <div class="step-indicator" id="stepIndicator">
          <div class="step-dot active" id="step1Dot">1</div>
          <div class="step-line" id="line1"></div>
          <div class="step-dot" id="step2Dot">2</div>
          <div class="step-line" id="line2"></div>
          <div class="step-dot" id="step3Dot">3</div>
        </div>

        <!-- Step 1: Admin Info -->
        <div id="step1" class="form-step">
          <h3 style="font-size: 1rem; margin-bottom: 1rem;">Admin Information</h3>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Full Name *</label>
              <input type="text" class="form-control" id="regName" placeholder="John Doe" required>
            </div>
            <div class="form-group">
              <label class="form-label">Phone *</label>
              <input type="tel" class="form-control" id="regPhone" placeholder="+91 98765 43210" required>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Work Email *</label>
            <input type="email" class="form-control" id="regEmail" placeholder="admin@company.com" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Password *</label>
              <input type="password" class="form-control" id="regPassword" placeholder="Min 8 characters" required minlength="8">
            </div>
            <div class="form-group">
              <label class="form-label">Confirm Password *</label>
              <input type="password" class="form-control" id="regPasswordConfirm" placeholder="Re-enter password" required>
            </div>
          </div>
          <button class="btn btn-primary w-full" onclick="goToStep(2)">Continue <i class="fas fa-arrow-right"></i></button>
        </div>

        <!-- Step 2: Company Info -->
        <div id="step2" class="form-step hidden">
          <h3 style="font-size: 1rem; margin-bottom: 1rem;">Company Information</h3>
          <div class="form-group">
            <label class="form-label">Company Name *</label>
            <input type="text" class="form-control" id="companyName" placeholder="Acme Corporation" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Industry *</label>
              <select class="form-control" id="companyIndustry">
                <option value="">Select Industry</option>
                <option>Information Technology</option>
                <option>Healthcare</option>
                <option>Finance & Banking</option>
                <option>Manufacturing</option>
                <option>E-Commerce</option>
                <option>Education</option>
                <option>Consulting</option>
                <option>Recruitment Agency</option>
                <option>Other</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Company Size *</label>
              <select class="form-control" id="companySize">
                <option value="">Select Size</option>
                <option>1-10</option>
                <option>11-50</option>
                <option>51-200</option>
                <option>201-1000</option>
                <option>1001-5000</option>
                <option>5000+</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Company Website</label>
            <input type="url" class="form-control" id="companyWebsite" placeholder="https://company.com">
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <button class="btn btn-secondary" onclick="goToStep(1)"><i class="fas fa-arrow-left"></i> Back</button>
            <button class="btn btn-primary" style="flex:1;" onclick="goToStep(3)">Continue <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 3: Preferences -->
        <div id="step3" class="form-step hidden">
          <h3 style="font-size: 1rem; margin-bottom: 1rem;">Setup Preferences</h3>
          <div class="form-group">
            <label class="form-label">How do you plan to use SimpaticoHR?</label>
            <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
              <label style="display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--gray-200);border-radius:var(--radius-sm);cursor:pointer;">
                <input type="checkbox" name="useCase" value="ats" checked> <span style="font-size:0.9rem;">Applicant Tracking System</span>
              </label>
              <label style="display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--gray-200);border-radius:var(--radius-sm);cursor:pointer;">
                <input type="checkbox" name="useCase" value="proctoring" checked> <span style="font-size:0.9rem;">AI Proctored Interviews</span>
              </label>
              <label style="display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--gray-200);border-radius:var(--radius-sm);cursor:pointer;">
                <input type="checkbox" name="useCase" value="automation" checked> <span style="font-size:0.9rem;">HR Automation</span>
              </label>
              <label style="display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--gray-200);border-radius:var(--radius-sm);cursor:pointer;">
                <input type="checkbox" name="useCase" value="multi_client"> <span style="font-size:0.9rem;">Multi-Client Management (Agency)</span>
              </label>
            </div>
          </div>
          <div class="form-group">
            <label style="display:flex;align-items:flex-start;gap:10px;">
              <input type="checkbox" id="agreeTerms" required style="margin-top:4px;">
              <span style="font-size:0.85rem;color:var(--gray-600);">
                I agree to SimpaticoHR's <a href="#" style="color:var(--primary);">Terms of Service</a> and 
                <a href="#" style="color:var(--primary);">Privacy Policy</a>
              </span>
            </label>
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <button class="btn btn-secondary" onclick="goToStep(2)"><i class="fas fa-arrow-left"></i> Back</button>
            <button class="btn btn-primary" style="flex:1;" onclick="handleCompanyRegistration()" id="registerBtn">
              <i class="fas fa-rocket"></i> Create Account
            </button>
          </div>
        </div>

        <div class="auth-links">
          Already have an account? <a href="login.html">Sign In</a>
        </div>
      </div>
    </div>
  </div>

  <div class="toast-container" id="toastContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../js/supabase-client.js"></script>
  <script src="../js/auth.js"></script>
  <script>
    let currentStep = 1;
    function goToStep(step) {
      // Validation for step 1
      if (step === 2 && currentStep === 1) {
        const name = document.getElementById('regName').value;
        const email = document.getElementById('regEmail').value;
        const pass = document.getElementById('regPassword').value;
        const passConfirm = document.getElementById('regPasswordConfirm').value;
        if (!name || !email || !pass) { showToast('Please fill all required fields', 'error'); return; }
        if (pass !== passConfirm) { showToast('Passwords do not match', 'error'); return; }
        if (pass.length < 8) { showToast('Password must be at least 8 characters', 'error'); return; }
      }
      if (step === 3 && currentStep === 2) {
        const compName = document.getElementById('companyName').value;
        if (!compName) { showToast('Please enter company name', 'error'); return; }
      }

      document.querySelectorAll('.form-step').forEach(s => s.classList.add('hidden'));
      document.getElementById(`step${step}`).classList.remove('hidden');

      for (let i = 1; i <= 3; i++) {
        const dot = document.getElementById(`step${i}Dot`);
        dot.classList.remove('active', 'done');
        if (i < step) dot.classList.add('done');
        if (i === step) dot.classList.add('active');
      }
      if (step > 1) document.getElementById('line1').classList.add('done');
      else document.getElementById('line1').classList.remove('done');
      if (step > 2) document.getElementById('line2').classList.add('done');
      else document.getElementById('line2').classList.remove('done');

      currentStep = step;
    }
  </script>
</body>
</html>
