<!DOCTYPE html>
<html>
<head>
  <title>Super Admin â€” SimpaticoHR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:Arial;background:#0f172a;color:white;margin:0}
    .top{padding:20px;background:#111827;display:flex;justify-content:space-between}
    .card{background:#1f2937;padding:20px;border-radius:10px;margin:20px}
    button{padding:8px 14px;border:none;border-radius:6px;cursor:pointer}
    .danger{background:#ef4444;color:white}
  </style>
</head>
<body>

<div class="top">
  <h2>Super Admin Panel</h2>
  <button class="danger" onclick="logout()">Logout</button>
</div>

<div class="card">
  <h3>Platform Statistics</h3>
  <p>Companies: <span id="companies">-</span></p>
  <p>Users: <span id="users">-</span></p>
  <p>Jobs: <span id="jobs">-</span></p>
  <p>Applications: <span id="applications">-</span></p>
</div>

<script>
const API = "https://evalis-ai.simpaticohrconsultancy.workers.dev";
const token = localStorage.getItem("simpatico_token");

if (!token) location.href="/platform/login.html";

async function loadStats(){
  const res = await fetch(`${API}/api/admin/stats`,{
    headers:{ Authorization:`Bearer ${token}` }
  });
  const data = await res.json();
  if(!res.ok){ logout(); return; }

  document.getElementById("companies").textContent = data.total_companies;
  document.getElementById("users").textContent = data.total_users;
  document.getElementById("jobs").textContent = data.total_jobs;
  document.getElementById("applications").textContent = data.total_applications;
}

function logout(){
  localStorage.clear();
  location.href="/platform/login.html";
}

loadStats();
</script>

</body>
</html>
